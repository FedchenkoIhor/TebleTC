<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="source/css/base.css">
    <link rel="stylesheet" href="source/css/zbcc.css">
</head>

<body>
    <main>
        <div id="zb-crypto-constructor">
            <form id="zbcc-precond-popup">
                <!-- TODO: popup form as popup + edit ids and add classes/// + refactor -->
                <section class="data-block" id="precond-popup">
                    <header>
                        <h3 class="block-title">Add pre-condition</h3>
                        <div class="block-description">
                            <p></p>
                        </div>
                    </header>

                    <div class="inputs base-inputs">
                        <div id="time">
                            <h3>
                                <label><input type="checkbox" id="time-select">Time</label>
                            </h3>
                            <ul>
                                <li>
                                    <label><input disabled type="radio" name="time-params" id="time-monthly">monthly</label>
                                </li>
                                <li>
                                    <input disabled type="radio" name="time-params" id="time-monthly-easier">
                                    when month is
                                    <select disabled name="" id="time-monthly-easier-cb1">
                                        <option value="0" disabled selected>&lt;/&lt;=/&gt;=/&gt;/==/!=</option>
                                        <option value="<"><</option>
                                        <option value="<="><=</option>
                                        <option value=">=">>=</option>
                                        <option value=">">></option>
                                        <option value="==">==</option>
                                        <option value="!=">!=</option>
                                    </select>
                                    <input disabled type="number" id="time-monthly-harder-inpx">
                                </li>
                                <li>
                                    <input disabled type="radio" name="time-params" id="time-monthly-harder">
                                    when month is
                                    <select disabled name="" id="time-monthly-harder-cb1">
                                        <option value="0" disabled selected>&lt;/&lt;=/&gt;=/&gt;/==/!=</option>
                                        <option value="<"><</option>
                                        <option value="<="><=</option>
                                        <option value=">=">>=</option>
                                        <option value=">">></option>
                                        <option value="==">==</option>
                                        <option value="!=">!=</option>
                                    </select>
                                    <input disabled type="number" id="time-monthly-harder-inpx">
                                    and
                                    <select disabled name="" id="time-monthly-harder-cb1">
                                        <option value="0" disabled selected>&lt;/&lt;=/&gt;=/&gt;/==/!=</option>
                                        <option value="<"><</option>
                                        <option value="<="><=</option>
                                        <option value=">=">>=</option>
                                        <option value=">">></option>
                                        <option value="==">==</option>
                                        <option value="!=">!=</option>
                                    </select>
                                    <input disabled type="number" id="time-monthly-harder-inpy">
                                </li>
                            </ul>
                        </div>

                        <div id="token-price">
                            <select disabled name="" id="token-price-andor">
                                <option value="0" disabled selected>AND / OR</option>
                                <option value="AND">AND</option>
                                <option value="OR">OR</option>
                            </select>
                            <h3>
                                <label><input type="checkbox" id="token-price-select">Token price threshold values</label>
                            </h3>
                            <ul>
                                <li>
                                    <input disabled type="radio" name="token-price-params" id="token-price-easier">
                                    when Token price is
                                    <select disabled name="" id="token-price-easier-cb1">
                                        <option value="0" disabled selected>&lt;/&lt;=/&gt;=/&gt;/==/!=</option>
                                        <option value="<"><</option>
                                        <option value="<="><=</option>
                                        <option value=">=">>=</option>
                                        <option value=">">></option>
                                        <option value="==">==</option>
                                        <option value="!=">!=</option>
                                    </select>
                                    <input disabled type="number" id="token-price-easier-inpx">
                                </li>
                                <li>
                                    <input disabled type="radio" name="token-price-params" id="token-price-harder">
                                    when Token price is
                                    <select disabled name="" id="token-price-harder-cb1">
                                        <option value="0" disabled selected>&lt;/&lt;=/&gt;=/&gt;/==/!=</option>
                                        <option value="<"><</option>
                                        <option value="<="><=</option>
                                        <option value=">=">>=</option>
                                        <option value=">">></option>
                                        <option value="==">==</option>
                                        <option value="!=">!=</option>
                                    </select>
                                    <input disabled type="number" id="token-price-harder-inpx">
                                    and
                                    <select disabled name="" id="token-price-harder-cb2">
                                        <option value="0" disabled selected>&lt;/&lt;=/&gt;=/&gt;/==/!=</option>
                                        <option value="<"><</option>
                                        <option value="<="><=</option>
                                        <option value=">=">>=</option>
                                        <option value=">">></option>
                                        <option value="==">==</option>
                                        <option value="!=">!=</option>
                                    </select>
                                    <input disabled type="number" id="token-price-harder-inpy">
                                </li>
                            </ul>
                        </div>

                        <div id="pool-threshold">
                            <select disabled name="" id="pool-threshold-andor">
                                <option value="0" disabled selected>AND / OR</option>
                                <option value="AND">AND</option>
                                <option value="OR">OR</option>
                            </select>
                            <h3>
                                <label><input type="checkbox" id="pool-threshold-select">Pool threshold values</label>
                            </h3>
                            <ul>
                                <li>
                                    <input disabled type="radio" name="pool-threshold-params" id="pool-threshold-easier">
                                    when
                                    <select disabled name="" id="pool-threshold-easier-pool">
                                        <option value="0" disabled selected>Pool #</option>
                                        <option value="Pool 1">Pool 1</option>
                                    </select>
                                    is
                                    <select disabled name="" id="pool-threshold-easier-cb1">
                                        <option value="0" disabled selected>&lt;/&lt;=/&gt;=/&gt;/==/!=</option>
                                        <option value="<"><</option>
                                        <option value="<="><=</option>
                                        <option value=">=">>=</option>
                                        <option value=">">></option>
                                        <option value="==">==</option>
                                        <option value="!=">!=</option>
                                    </select>
                                    <input disabled type="number" id="pool-threshold-easier-inpx">
                                </li>
                                <li>
                                    <input disabled type="radio" name="pool-threshold-params" id="pool-threshold-harder">
                                    when
                                    <select disabled name="" id="pool-threshold-harder-pool">
                                        <option value="0" disabled selected>Pool #</option>
                                        <option value="Pool 1">Pool 1</option>
                                    </select>
                                    is
                                    <select disabled name="" id="pool-threshold-harder-cb1">
                                        <option value="0" disabled selected>&lt;/&lt;=/&gt;=/&gt;/==/!=</option>
                                        <option value="<"><</option>
                                        <option value="<="><=</option>
                                        <option value=">=">>=</option>
                                        <option value=">">></option>
                                        <option value="==">==</option>
                                        <option value="!=">!=</option>
                                    </select>
                                    <input disabled type="number" id="pool-threshold-harder-inpx">
                                    and
                                    <select disabled name="" id="pool-threshold-harder-cb2">
                                        <option value="0" disabled selected>&lt;/&lt;=/&gt;=/&gt;/==/!=</option>
                                        <option value="<"><</option>
                                        <option value="<="><=</option>
                                        <option value=">=">>=</option>
                                        <option value=">">></option>
                                        <option value="==">==</option>
                                        <option value="!=">!=</option>
                                    </select>
                                    <input disabled type="number" id="pool-threshold-harder-inpy">
                                </li>
                            </ul>
                        </div>
                        <div style="display: flex; flex-direction: row; justify-content: space-around">
                            <button class="submit" id="apply-pre-condition">Ok</button>
                            <button class="submit" id="dismiss-pre-condition">Cancel</button>
                        </div>
                    </div>
                </section>
            </form>


            <!--  -->


            <form id="zbcc-inputs">

                <!--  -->

                <section class="data-block" id="initial-data">
                    <header>
                        <h3 class="block-title">INITIAL DATA</h3>
                        <div class="block-description">
                            <p></p>
                        </div>
                    </header>

                    <div class="inputs base-inputs">
                        <div class="inputs-table" id="initial-data">
                            <header>
                                <h3 class="table-title"></h3>
                                <div class="table-description"></div>
                            </header>
                            <table>
                                <tr>
                                    <th>Total Tokens Amount</th>
                                    <th>Initial Token Price</th>
                                    <th>Exchange Type</th>
                                    <th>Trading Function</th>
                                    <th>Duration</th>
                                </tr>
                                <tr>
                                    <td><input type="number" id="total-tokens-amount" value="" placeholder="x"></td>
                                    <td><input type="number" id="initial-token-price" value="" placeholder="x"></td>
                                    <td>
                                        <select name="exchange-type" id="exchange-type">
                                            <option value="decentralized">Decentralized</option>
                                            <option value="centralized">Centralized</option>
                                        </select>
                                    </td>
                                    <td>
                                        <select name="trading-function" id="trading-function">
                                            <option value="increasing">Increasing</option>
                                            <option value="decreasing">Decreasing</option>
                                            <option value="volatility">Volatility</option>
                                        </select>
                                    </td>
                                    <td><input type="number" id="duration" value="" placeholder="x"></td>
                                </tr>
                            </table>
                        </div>
                        <button class="submit" id="build-initial-data">Build Scheme</button>
                    </div>
                </section>

                <!--  -->

                <section class="data-block" id="investment-rounds">
                    <header>
                        <h3 class="block-title">INVESTMENT ROUNDS</h3>
                        <div class="block-description">
                            <p>You can fill only two columns ("Token Price" (if it will change) and any of the other columns or "Fiat" and "Tokens Amount") - the rest will be calculated automatically.</p>
                        </div>
                    </header>

                    <div class="inputs extra-inputs">
                        <label>
                            <p>Rounds Number</p>
                            <input type="number" id="rounds-number" value="1">
                        </label>
                    </div>

                    <div class="inputs base-inputs">
                        <div class="inputs-table numerable" id="rounds">
                            <header>
                                <h3 class="table-title"></h3>
                                <div class="table-description"></div>
                            </header>
                            <table>
                                <tr>
                                    <th>Round Title</th>
                                    <th>Fiat</th>
                                    <th>Token Price</th>
                                    <th>Tokens amount</th>
                                    <th>Investor share</th>
                                </tr>
                            </table>
                        </div>
                        <button class="submit" id="build-investment-rounds">Build Scheme</button>
                    </div>
                </section>

                <!--  -->

                <section class="data-block" id="agents">
                    <header>
                        <h3 class="block-title">AGENTS</h3>
                        <div class="block-description">
                            <p>Agents are participants in the tokenomic (an individual or a group of individuals, a company or a group of companies (and any entity of individuals or companies), etc.).</p>
                            <p>Add the Agents that you have in project. If they are included in the Initial tokens distribution, fill in one of the fields - "Agent Share" or "Tokens Amount".</p>
                        </div>
                    </header>

                    <div class="inputs extra-inputs">
                        <label>
                            <p>Agents Number</p>
                            <input type="number" id="agents-number" min="1" value="1">
                        </label>
                    </div>

                    <div class="inputs base-inputs">
                        <div class="inputs-table numerable" id="agents">
                            <header>
                                <h3 class="table-title"></h3>
                                <div class="table-description"></div>
                            </header>
                            <table>
                                <tr>
                                    <th>Agent Name</th>
                                    <th>Agent Share</th>
                                    <th>Tokens Amount</th>
                                </tr>
                            </table>
                        </div>
                        <button class="submit" id="build-agents">Build Scheme</button>
                    </div>
                </section>

                <!--  -->

                <section class="data-block" id="pools">
                    <header>
                        <h3 class="block-title">POOLS</h3>
                        <div class="block-description">
                            <p>Pools are so-called safes to which tokens/funds are allocated for various services or project needs. Add the Pools that you have in project. If they are included in the Initial tokens distribution, fill in one of the fields - "Pool Share" or "Amount". (Pool types - project tokens (tokens), fiat (USD, UAN, etc.), cryptocurrency (USDC, USDT, etc.)</p>
                        </div>
                    </header>

                    <div class="inputs extra-inputs">
                        <div class="inputs-table calcable" id="pool-types">
                            <table>
                                <tr>
                                    <th>№</th>
                                    <th>Pool Type</th>
                                    <th></th>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <div class="inputs base-inputs">
                        <div class="inputs-table calcable" id="pools">
                            <header>
                                <h3 class="table-title"></h3>
                                <div class="table-description"></div>
                            </header>
                            <table>
                                <tr>
                                    <th>Pool Title</th>
                                    <th>Pool Type</th>
                                    <th>Pool Share</th>
                                    <th>Amount</th>
                                    <th></th>
                                </tr>
                            </table>
                        </div>
                        <button class="submit" id="build-pools">Build Scheme</button>
                    </div>
                </section>

                <!--  -->

                <section class="data-block" id="vesting-and-unlocking">
                    <header>
                        <h3 class="block-title">VESTING & UNLOCKING</h3>
                        <div class="block-description">
                            <p></p>
                        </div>
                    </header>

                    <div class="inputs extra-inputs">
                        <label>
                            <p>VESTING</p>
                            <button class="unhidder" id="show-vesting">+</button>
                        </label>
                        <label>
                            <p>UNLOCKING</p>
                            <button class="unhidder" id="show-unlocking">+</button>
                        </label>
                    </div>

                    <div class="inputs base-inputs">
                        <div class="inputs-table unhiddable calcable" id="vesting">
                            <header>
                                <h3 class="table-title">Vesting</h3>
                                <div class="table-description"></div>
                            </header>
                            <table>
                                <tr>
                                    <th>Agent Name</th>
                                    <th>Pool</th>
                                    <th>Start Vesting</th>
                                    <th>End Vesting</th>
                                    <th>Vesting Coefficient</th>
                                </tr>
                            </table>
                        </div>

                        <div class="inputs-table unhiddable calcable" id="unlocking">
                            <header>
                                <h3 class="table-title">Unlocking Schedule</h3>
                                <div class="table-description"></div>
                            </header>
                            <table>
                                <tr>
                                    <th>Agent Name</th>
                                    <th>Start Unlocking</th>
                                    <th>End Unlocking</th>
                                    <th>Initial Unlocking</th>
                                    <th></th>
                                </tr>
                            </table>
                        </div>
                        <button class="submit" id="build-vesting-and-unlocking">Build Scheme</button>
                    </div>
                </section>

                <!--  -->

                <section class="data-block" id="project-services">
                    <header>
                        <h3 class="block-title">PROJECT SERVICES</h3>
                        <div class="block-description">
                            <p></p>
                        </div>
                    </header>

                    <div class="inputs extra-inputs">
                        <label>
                            <p>STAKING</p>
                            <button class="unhidder" id="show-staking">+</button>
                        </label>
                        <label>
                            <p>FARMING</p>
                            <button class="unhidder" id="show-farming">+</button>
                        </label>
                        <div>
                            <p>CHOOSE / ADD NEW SERVICE</p>
                            <input type="text" list="service-names" id="service-name" data-prev-placeholder="enter Service name" placeholder="enter Service name">
                            <datalist id="service-names">
                            </datalist>
                            <button id="add-service">+</button>
                        </div>
                    </div>

                    <div class="inputs base-inputs">
                        <div class="inputs-table unhiddable calcable" id="staking">
                            <header>
                                <h3 class="table-title">Staking</h3>
                                <div class="table-description"></div>
                            </header>
                            <table>
                                <tr>
                                    <th>№</th>
                                    <th>Agent Name</th>
                                    <th>Agent Share</th>
                                    <th>Unstaking Factor</th>
                                    <th>Reward Coefficient</th>
                                    <th>Pool (For Rewards)</th>
                                    <th></th>
                                </tr>
                            </table>
                            <button class="submit" id="add-curves">Add curves</button>
                        </div>


                        <div class="inputs-table unhiddable calcable" id="farming">
                            <header>
                                <h3 class="table-title">Farming</h3>
                                <div class="table-description"></div>
                            </header>
                            <table>
                                <tr>
                                    <th>№</th>
                                    <th>Agent Name</th>
                                    <th>Agent Share</th>
                                    <th>Unstaking Factor</th>
                                    <th>Reward Coefficient</th>
                                    <th>Pool (For Rewards)</th>
                                    <th></th>
                                </tr>
                            </table>
                            <button class="submit" id="add-curves">Add curves</button>
                        </div>

                    </div>
                </section>

                <!--  -->

                <section class="data-block" id="token-circulation">
                    <header>
                        <h3 class="block-title">TOKEN CIRCULATION</h3>
                        <div class="block-description">
                            <p>You can add actions describing the circulation of the tokens between tokenomics entities (agents, pools, etc.).
                                <br>The Source can be an Agent, Pool, or Income of one of the added services.
                                <br>The Destination can be an Agent or Pool.
                                <br>Pre-Condition - is the condition under which the corresponding action takes place.
                                <br>These can be the time in which the specified action should take place, pool threshold values, or token price threshold values.</p>
                        </div>
                    </header>

                    <div class="inputs extra-inputs">
                        <label>
                            <p>ADD ACTION</p>
                            <button class="unhidder" id="show-actions">+</button>
                        </label>
                    </div>

                    <div class="inputs base-inputs">
                        <div class="inputs-table unhiddable calcable" id="actions">
                            <header>
                                <h3 class="table-title"></h3>
                                <div class="table-description"></div>
                            </header>

                            <table>
                                <tr>
                                    <th>Action №</th>
                                    <th>Source</th>
                                    <th>Currency Type</th>
                                    <th>Value % (per month)</th>
                                    <th>Destination</th>
                                    <th>Pre-Condition</th>
                                    <th></th>
                                </tr>
                            </table>
                        </div>
                        <button class="submit" id="build-token-circulation">Build Scheme</button>
                    </div>
                </section>

                <!--  -->

            </form>
        </div>
    </main>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="source/js/htmlTemplates.js"></script>
    <script src="source/js/structs.js"></script>
    <script src="source/js/zbcc.js"></script>
    <script>
        $('#zbcc-inputs').on('submit', e => {
            e.preventDefault()
            e.stopImmediatePropagation()
        })

        const form = new zbccForm({ element: null, htmlTemplates: htmlTemplates })
        console.log(form)


        // TODO: refactor this sh#t))

        $('form#zbcc-precond-popup').on('submit', e => {
            e.preventDefault()
            $('form#zbcc-precond-popup').hide()

            $('form#zbcc-precond-popup .inputs div#time #time-select').prop('checked', false)

            $('form#zbcc-precond-popup .inputs div#time #time-monthly').prop('checked', false)
            $('form#zbcc-precond-popup .inputs div#time #time-monthly-easier').prop('checked', false)
            $('form#zbcc-precond-popup .inputs div#time #time-monthly-easier-cb1').val('0')
            $('form#zbcc-precond-popup .inputs div#time #time-monthly-easier-inpx').val('')

            $('form#zbcc-precond-popup .inputs div#time #time-monthly-harder').prop('checked', false)
            $('form#zbcc-precond-popup .inputs div#time #time-monthly-harder-cb1').val('0')
            $('form#zbcc-precond-popup .inputs div#time #time-monthly-harder-inpx').val('')
            $('form#zbcc-precond-popup .inputs div#time #time-monthly-harder-cb2').val('0')
            $('form#zbcc-precond-popup .inputs div#time #time-monthly-harder-inpy').val('')


            $('form#zbcc-precond-popup .inputs div#time #time-monthly').prop('disabled', true)

            $('form#zbcc-precond-popup .inputs div#time #time-monthly-easier').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#time #time-monthly-easier-cb1').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#time #time-monthly-easier-inpx').prop('disabled', true)

            $('form#zbcc-precond-popup .inputs div#time #time-monthly-harder').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#time #time-monthly-harder-cb1').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#time #time-monthly-harder-inpx').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#time #time-monthly-harder-cb2').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#time #time-monthly-harder-inpy').prop('disabled', true)

            //

            $('form#zbcc-precond-popup .inputs div#token-price #token-price-select').prop('checked', false)
            $('form#zbcc-precond-popup .inputs div#token-price #token-price-andor').val('0')

            $('form#zbcc-precond-popup .inputs div#token-price #token-price').prop('checked', false)
            $('form#zbcc-precond-popup .inputs div#token-price #token-price-easier').prop('checked', false)
            $('form#zbcc-precond-popup .inputs div#token-price #token-price-easier-cb1').val('0')
            $('form#zbcc-precond-popup .inputs div#token-price #token-price-easier-inpx').val('')

            $('form#zbcc-precond-popup .inputs div#token-price #token-price-harder').prop('checked', false)
            $('form#zbcc-precond-popup .inputs div#token-price #token-price-harder-cb1').val('0')
            $('form#zbcc-precond-popup .inputs div#token-price #token-price-harder-inpx').val('')
            $('form#zbcc-precond-popup .inputs div#token-price #token-price-harder-cb2').val('0')
            $('form#zbcc-precond-popup .inputs div#token-price #token-price-harder-inpy').val('')


            $('form#zbcc-precond-popup .inputs div#token-price #token-price-andor').prop('disabled', true)

            $('form#zbcc-precond-popup .inputs div#token-price #token-price').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#token-price #token-price-easier').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#token-price #token-price-easier-cb1').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#token-price #token-price-easier-inpx').prop('disabled', true)

            $('form#zbcc-precond-popup .inputs div#token-price #token-price-harder').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#token-price #token-price-harder-cb1').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#token-price #token-price-harder-inpx').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#token-price #token-price-harder-cb2').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#token-price #token-price-harder-inpy').prop('disabled', true)

            //

            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-select').prop('checked', false)
            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-andor').val('0')

            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold').prop('checked', false)
            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-easier').prop('checked', false)
            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-easier-cb1').val('0')
            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-easier-inpx').val('')
            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-easier-pool').val('0')

            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder').prop('checked', false)
            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder-cb1').val('0')
            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder-inpx').val('')
            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder-cb2').val('0')
            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder-inpy').val('')
            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder-pool').val('0')


            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-andor').prop('disabled', true)

            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-easier').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-easier-cb1').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-easier-inpx').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-easier-pool').prop('disabled', true)

            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder-cb1').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder-inpx').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder-cb2').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder-inpy').prop('disabled', true)
            $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder-pool').prop('disabled', true)
        })

        $('form#zbcc-precond-popup .inputs div#time #time-select').on('change', e => {
            if (e.currentTarget.checked) {
                $('form#zbcc-precond-popup .inputs div#time #time-monthly').prop('disabled', false)

                $('form#zbcc-precond-popup .inputs div#time #time-monthly-easier').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#time #time-monthly-easier-cb1').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#time #time-monthly-easier-inpx').prop('disabled', false)

                $('form#zbcc-precond-popup .inputs div#time #time-monthly-harder').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#time #time-monthly-harder-cb1').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#time #time-monthly-harder-inpx').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#time #time-monthly-harder-cb2').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#time #time-monthly-harder-inpy').prop('disabled', false)
            } else {
                $('form#zbcc-precond-popup .inputs div#time #time-monthly').prop('disabled', true)

                $('form#zbcc-precond-popup .inputs div#time #time-monthly-easier').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#time #time-monthly-easier-cb1').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#time #time-monthly-easier-inpx').prop('disabled', true)

                $('form#zbcc-precond-popup .inputs div#time #time-monthly-harder').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#time #time-monthly-harder-cb1').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#time #time-monthly-harder-inpx').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#time #time-monthly-harder-cb2').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#time #time-monthly-harder-inpy').prop('disabled', true)
            }
        })

        $('form#zbcc-precond-popup .inputs div#token-price #token-price-select').on('change', e => {
            if (e.currentTarget.checked) {
                $('form#zbcc-precond-popup .inputs div#token-price #token-price-andor').prop('disabled', false)

                $('form#zbcc-precond-popup .inputs div#token-price #token-price').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#token-price #token-price-easier').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#token-price #token-price-easier-cb1').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#token-price #token-price-easier-inpx').prop('disabled', false)

                $('form#zbcc-precond-popup .inputs div#token-price #token-price-harder').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#token-price #token-price-harder-cb1').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#token-price #token-price-harder-inpx').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#token-price #token-price-harder-cb2').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#token-price #token-price-harder-inpy').prop('disabled', false)
            } else {
                $('form#zbcc-precond-popup .inputs div#token-price #token-price-andor').prop('disabled', true)

                $('form#zbcc-precond-popup .inputs div#token-price #token-price').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#token-price #token-price-easier').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#token-price #token-price-easier-cb1').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#token-price #token-price-easier-inpx').prop('disabled', true)

                $('form#zbcc-precond-popup .inputs div#token-price #token-price-harder').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#token-price #token-price-harder-cb1').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#token-price #token-price-harder-inpx').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#token-price #token-price-harder-cb2').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#token-price #token-price-harder-inpy').prop('disabled', true)
            }
        })

        $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-select').on('change', e => {
            if (e.currentTarget.checked) {
                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-andor').prop('disabled', false)

                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-easier').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-easier-cb1').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-easier-inpx').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-easier-pool').prop('disabled', false)

                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder-cb1').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder-inpx').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder-cb2').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder-inpy').prop('disabled', false)
                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder-pool').prop('disabled', false)
            } else {
                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-andor').prop('disabled', true)

                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-easier').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-easier-cb1').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-easier-inpx').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-easier-pool').prop('disabled', true)

                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder-cb1').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder-inpx').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder-cb2').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder-inpy').prop('disabled', true)
                $('form#zbcc-precond-popup .inputs div#pool-threshold #pool-threshold-harder-pool').prop('disabled', true)
            }
        })

        form.dataBlocks['tokenCirculation'].actions.tables.actions.addEventListener('change', e => {
            if (e.target.id === 'pre-condition' && e.target.checked) {
                $('#zbcc-precond-popup').show()
            }
        })


        function calculateInvestmentRoundForRow(rowId, dataBlock) {
            let db = dataBlock.rows[rowId]
            let tta = form.dataBlocks['initialData'].inputs.totalTokensAmount.value

            console.log('')
            console.log('')
            console.log('')
            console.log('—————————————')

            Object.keys(db).forEach(key => {
                if (key === 'id' || key === 'roundTitle')
                    return

                console.log('')
                console.log('key:', key)
                console.log('value:', db[key].value)
                console.log('element:', db[key].element)
                console.log('element value:', db[key].element.value)
            })
            // console.log(db.map(e => {return e.value}))

            if (db.tokenPrice.value !== undefined && db.investorShare.value !== undefined) {
                db.tokensAmount.element.value = tta * db.investorShare.value / 100
                db.tokensAmount.syncValue()
                db.fiat.element.value = tta * db.investorShare.value / 100 * db.tokenPrice.value
                db.fiat.syncValue()
            } else if (db.tokenPrice.value !== undefined && db.tokensAmount.value !== undefined) {
                db.investorShare.element.value = db.tokensAmount.value * 100 / tta
                db.investorShare.syncValue()
                db.fiat.element.value = db.tokensAmount.value / db.tokenPrice.value
                db.fiat.syncValue()
            } else if (db.tokenPrice.value !== undefined && db.fiat.value !== undefined) {
                db.tokensAmount.element.value = db.fiat.value * db.tokenPrice.value
                db.tokensAmount.syncValue()
                db.investorShare.element.value = db.fiat.value * db.tokenPrice.value * 100 / tta
                db.investorShare.syncValue()
            } else if (db.fiat.value !== undefined && db.tokensAmount.value !== undefined) {
                db.investorShare.element.value = db.tokensAmount.value * 100 / tta
                db.investorShare.syncValue()
                db.tokenPrice.element.value = db.fiat.value / db.tokensAmount.value
                db.tokenPrice.syncValue()
            } else if (db.fiat.value !== undefined && db.investorShare.value !== undefined) {
                db.tokensAmount.element.value = tta * db.investorShare.value / 100
                db.tokensAmount.syncValue()
                db.tokenPrice.element.value = db.fiat.value / ((tta * db.investorShare.value) / 100)
                db.tokenPrice.syncValue()
            } else {
                console.log('')
                console.log('not enough data for auto calculate')
                console.log('')
            }
        }

        form.dataBlocks['initialData'].inputs.totalTokensAmount.addEventListener('change', (e, input) => {
            let ids = Object.keys(form.dataBlocks['investmentRounds'].tables.rounds.rows)
            console.log('tta changed:', ids)
            for (let rowId = 0; rowId < Object.keys(form.dataBlocks['investmentRounds'].tables.rounds.rows).length; rowId++) {
                console.log('changing row:', rowId)
                calculateInvestmentRoundForRow(rowId, form.dataBlocks['investmentRounds'].tables.rounds)
            }
        })

        form.dataBlocks['investmentRounds'].tables.rounds.addEventListener('change', (e, dataBlock) => {
            console.log('')
            console.log('')
            console.log('rounds table changed')
            let rowId = e.target.parentNode.parentNode.id

            calculateInvestmentRoundForRow(rowId, dataBlock)
        })



        // let inputId = e.target.id
/* let tpv = dataBlock.rows[rowId].tokenPrice.value
            let tav = dataBlock.rows[rowId].tokensAmount.value
            let isv = dataBlock.rows[rowId].investorShare.value
            let fv = dataBlock.rows[rowId].fiat.value

            let tpev = dataBlock.rows[rowId].tokenPrice.element.value
            let taev = dataBlock.rows[rowId].tokensAmount.element.value
            let isev = dataBlock.rows[rowId].investorShare.element.value
            let fev = dataBlock.rows[rowId].fiat.element.value */
        // console.log(dataBlock.rows[rowId])
            /* switch (inputId) {
                case 'token-price':
                    if (dataBlock.rows[rowId].investorShare.value !== undefined) {
                        alert('TP & IS')
                    } else if (dataBlock.rows[rowId].tokensAmount.value !== undefined) {
                        alert('TP & TA')
                    } else if (dataBlock.rows[rowId].fiat.value !== undefined) {
                        alert('TP & F')
                    } else {
                        alert('not yet')
                    }
                    break

                case 'fiat':
                    // $(dataBlock.rows[rowId].tokensAmount.element).prop('disabled', true)
                    if (dataBlock.rows[rowId].tokensAmount.value !== undefined) {
                        alert('F & TA')
                    } else if (dataBlock.rows[rowId].investorShare.value !== undefined) {
                        alert('F & IS')
                    } else {
                        alert('not yet')
                    }
                    break

                case 'investor-share':
                    if (dataBlock.rows[rowId].tokenPrice.value !== undefined) {
                        alert('IS & TP')
                    } else if (dataBlock.rows[rowId].fiat.value !== undefined) {
                        alert('IS & F')
                    } else {
                        alert('not yet')
                    }
                    break

                case 'tokens-amount':
                    if (dataBlock.rows[rowId].tokenPrice.value !== undefined) {
                        alert('TA & TP')
                    } else if (dataBlock.rows[rowId].fiat.value !== undefined) {
                        alert('TA & F')
                    } else {
                        alert('not yet')
                    }
                    break

                default:
                    alert('not yet')
                    break
            } */
            // console.log(e.target.id)
            // console.log(e.target.parentNode.parentNode.id)
            // console.log(dataBlock.row.inputsSelectors.)
    </script>
</body>

</html>